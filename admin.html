<!DOCTYPE html>
<html>
<body>
<h3>Generate QR Absensi</h3>
<button onclick="generate()">Generate QR</button>
<p id="qr"></p>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<script>
// function generate() {
// //   fetch("https://script.google.com/macros/s/AKfycbym0TUkwd-tOcwxRkwbiebefQBk86uwQfaSmoj6wmX8-to-J4Nwb7xT-BzIvrdYP5FJ/exec")
// //     .then(res => res.text())
// //     .then(token => {
// //       const url = location.origin + "/?token=" + token;
// //       document.getElementById("qr").innerHTML = "";
// //       new QRCode(document.getElementById("qr"), url);
// //     });
    
//     const API_URL = "https://script.google.com/macros/s/AKfycbym0TUkwd-tOcwxRkwbiebefQBk86uwQfaSmoj6wmX8-to-J4Nwb7xT-BzIvrdYP5FJ/exec";
//     fetch(API_URL, {
//       method: "POST",
//       body: new URLSearchParams({
//         action: "GENERATE_TOKEN"
//       })
//     })
//     .then(res => res.json())
//     .then(data => {
//       alert("Token: " + data.token);
//     })
//     .catch(e => console.error(e));
// }

function generate() {
  const API_URL = "https://script.google.com/macros/s/AKfycbym0TUkwd-tOcwxRkwbiebefQBk86uwQfaSmoj6wmX8-to-J4Nwb7xT-BzIvrdYP5FJ/exec";

  fetch(API_URL, {
    method: "POST",
    body: "action=GENERATE_TOKEN"
  })
  .then(res => res.json())
  .then(data => {
    alert("Token: " + data.token);
  })
  .catch(err => {
    console.error(err);
    alert("FAILED");
  });
}
</script>
</body>
</html>
